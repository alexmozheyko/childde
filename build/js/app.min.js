"use strict";

function _createForOfIteratorHelper(o) { if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var userImageEl = document.getElementById('userImage');
var dropdownMenuEl = document.getElementById('accountDropdown');
var shortDescEls = document.getElementsByClassName('question-card__content__short-desc');
var qTopDropdownEl;
var qBottomDropdownEl;

var _iterator = _createForOfIteratorHelper(shortDescEls),
    _step;

try {
  var _loop = function _loop() {
    var elem = _step.value;
    elem.addEventListener('click', function () {
      elem.nextElementSibling.style.display = 'block';
      elem.remove();
    });
  };

  for (_iterator.s(); !(_step = _iterator.n()).done;) {
    _loop();
  }
} catch (err) {
  _iterator.e(err);
} finally {
  _iterator.f();
}

function generateQTopDropdownEl(x, y) {
  var xPos = x - 195;
  var yPos = y + 55 + window.scrollY;
  return "\n        <div class=\"question-card__dropdown question-dropdown\" id=\"qTopDropdown\" style=\"transform: translate3d(".concat(xPos, "px, ").concat(yPos, "px, 0px)\">\n            <div class=\"question-dropdown-wrapper\">\n                <a class=\"question-dropdown__item\">\n                    <div class=\"question-dropdown__item__icon\"><img src=\"./assets/icons/share.svg\" /></div><span>Teilen</span>\n                </a>\n                <a class=\"question-dropdown__item\">\n                    <div class=\"question-dropdown__item__icon\"><img src=\"./assets/icons/paintbrush.svg\" /></div><span>Bearbeiten</span>\n                </a>\n                <a class=\"question-dropdown__item question-dropdown__item--with-toggle\" id=\"notifyTogglerOption\">\n                    <div class=\"question-dropdown__item__toggle-wrapper\">\n                        <div>\n                            <div class=\"question-dropdown__item__icon\"><img src=\"./assets/icons/bell.svg\" /></div><span>Mitteilungen</span>\n                        </div>\n                        <label class=\"question-dropdown__item__toggle item-toggle\"><input type=\"checkbox\"/><span class=\"item-toggle__slider\"></span></label></div>\n                    <div class=\"question-dropdown__item__hint\">\n                        (Sie erhalten Mitteilungen \xFCber neue Antworten und Kommentare)\n                    </div>\n                </a>\n            </div>\n        </div>\n    ");
}

function generateQBottomDropdownEl(x, y) {
  var xPos = x - 90;
  var yPos = y - 120 + window.scrollY;
  return "\n        <div class=\"question-card__dropdown question-dropdown question-dropdown--bottom\" id=\"qBottomDropdown\" style=\"transform: translate3d(".concat(xPos, "px, ").concat(yPos, "px, 0px)\">\n            <div class=\"question-dropdown-wrapper\">\n                <a class=\"question-dropdown__item\">\n                    <div class=\"question-dropdown__item__icon\"><img src=\"./assets/icons/share.svg\" /></div><span>Teilen</span>\n                </a>\n                <a class=\"question-dropdown__item\">\n                    <div class=\"question-dropdown__item__icon\"><img src=\"./assets/icons/warning.svg\" /></div><span>Melden</span>\n                </a>\n            </div>\n        </div>\n    ");
}

function toggleQuestionNotifications() {
  var notifyToggleEl = document.getElementById('notifyTogglerOption');

  var _notifyToggleEl$query = notifyToggleEl.querySelector('input'),
      checked = _notifyToggleEl$query.checked;

  notifyToggleEl.querySelector('input').checked = !checked;
}

window.addEventListener('click', function (event) {
  if (qTopDropdownEl && !qTopDropdownEl.contains(event.target)) {
    qTopDropdownEl.remove();
  }

  if (qBottomDropdownEl && !qBottomDropdownEl.contains(event.target)) {
    qBottomDropdownEl.remove();
  }

  dropdownMenuEl.style.display = 'none';

  if (userImageEl.contains(event.target) || dropdownMenuEl.contains(event.target)) {
    dropdownMenuEl.style.display = 'block';
  }

  if (event.target.classList.contains('question-header__dropdown-icon')) {
    var _event$target$getBoun = event.target.getBoundingClientRect(),
        x = _event$target$getBoun.x,
        y = _event$target$getBoun.y;

    document.body.insertAdjacentHTML('beforeend', generateQTopDropdownEl(x, y));
    qTopDropdownEl = document.getElementById('qTopDropdown');
    qTopDropdownEl.querySelector('#notifyTogglerOption').addEventListener('click', toggleQuestionNotifications);
  }

  if (event.target.classList.contains('question-reviews__horizontal-dropdown')) {
    var _event$target$getBoun2 = event.target.getBoundingClientRect(),
        _x = _event$target$getBoun2.x,
        _y = _event$target$getBoun2.y;

    document.body.insertAdjacentHTML('beforeend', generateQBottomDropdownEl(_x, _y));
    qBottomDropdownEl = document.getElementById('qBottomDropdown');
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC4uanMiXSwibmFtZXMiOlsidXNlckltYWdlRWwiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZHJvcGRvd25NZW51RWwiLCJzaG9ydERlc2NFbHMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicVRvcERyb3Bkb3duRWwiLCJxQm90dG9tRHJvcGRvd25FbCIsImVsZW0iLCJhZGRFdmVudExpc3RlbmVyIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwic3R5bGUiLCJkaXNwbGF5IiwicmVtb3ZlIiwiZ2VuZXJhdGVRVG9wRHJvcGRvd25FbCIsIngiLCJ5IiwieFBvcyIsInlQb3MiLCJ3aW5kb3ciLCJzY3JvbGxZIiwiZ2VuZXJhdGVRQm90dG9tRHJvcGRvd25FbCIsInRvZ2dsZVF1ZXN0aW9uTm90aWZpY2F0aW9ucyIsIm5vdGlmeVRvZ2dsZUVsIiwicXVlcnlTZWxlY3RvciIsImNoZWNrZWQiLCJldmVudCIsImNvbnRhaW5zIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYm9keSIsImluc2VydEFkamFjZW50SFRNTCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFNQSxXQUFXLEdBQU1DLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixXQUF4QixDQUF2QjtBQUNBLElBQU1DLGNBQWMsR0FBR0YsUUFBUSxDQUFDQyxjQUFULENBQXdCLGlCQUF4QixDQUF2QjtBQUNBLElBQU1FLFlBQVksR0FBS0gsUUFBUSxDQUFDSSxzQkFBVCxDQUFnQyxvQ0FBaEMsQ0FBdkI7QUFFQSxJQUFJQyxjQUFKO0FBQ0EsSUFBSUMsaUJBQUo7OzJDQUVtQkgsWTs7Ozs7UUFBUkksSTtBQUNQQSxJQUFBQSxJQUFJLENBQUNDLGdCQUFMLENBQXNCLE9BQXRCLEVBQStCLFlBQU07QUFDakNELE1BQUFBLElBQUksQ0FBQ0Usa0JBQUwsQ0FBd0JDLEtBQXhCLENBQThCQyxPQUE5QixHQUF3QyxPQUF4QztBQUNBSixNQUFBQSxJQUFJLENB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REEsQ0FEK0Q7O0FBRzFFZixJQUFBQSxRQUFRLENBQUM4QixJQUFULENBQWNDLGtCQUFkLENBQWlDLFdBQWpDLEVBQThDWCx5QkFBeUIsQ0FBQ04sRUFBRCxFQUFJQyxFQUFKLENBQXZFO0FBQ0FULElBQUFBLGlCQUFpQixHQUFHTixRQUFRLENBQUNDLGNBQVQsQ0FBd0IsaUJBQXhCLENBQXBCO0FBQ0g7QUFDSixDQTlCRCIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgdXNlckltYWdlRWwgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlckltYWdlJyk7XHJcbmNvbnN0IGRyb3Bkb3duTWVudUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjY291bnREcm9wZG93bicpO1xyXG5jb25zdCBzaG9ydERlc2NFbHMgICA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3F1ZXN0aW9uLWNhcmRfX2NvbnRlbnRfX3Nob3J0LWRlc2MnKTtcclxuXHJcbmxldCBxVG9wRHJvcGRvd25FbDtcclxubGV0IHFCb3R0b21Ecm9wZG93bkVsO1xyXG5cclxuZm9yIChjb25zdCBlbGVtIG9mIHNob3J0RGVzY0Vscykge1xyXG4gICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBlbGVtLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICBlbGVtLnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlUVRvcERyb3Bkb3duRWwoeCwgeSkge1xyXG4gICAgY29uc3QgeFBvcyA9IHggLSAxOTU7XHJcbiAgICBjb25zdCB5UG9zID0geSArIDU1ICsgd2luZG93LnNjcm9sbFk7XHJcblxyXG4gICAgcmV0dXJuIGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwicXVlc3Rpb24tY2FyZF9fZHJvcGRvd24gcXVlc3Rpb24tZHJvcGRvd25cIiBpZD1cInFUb3BEcm9wZG93blwiIHN0eWxlPVwidHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgkeyB4UG9zIH1weCwgJHsgeVBvcyB9cHgsIDBweClcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInF1ZXN0aW9uLWRyb3Bkb3duLXdyYXBwZXJcIj5cclxuICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwicXVlc3Rpb24tZHJvcGRvd25fX2l0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicXVlc3Rpb24tZHJvcGRvd25fX2l0ZW1fX2ljb25cIj48aW1nIHNyYz1cIi4vYXNzZXRzL2ljb25zL3NoYXJlLnN2Z1wiIC8+PC9kaXY+PHNwYW4+VGVpbGVuPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJxdWVzdGlvbi1kcm9wZG93bl9faXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxdWVzdGlvbi1kcm9wZG93bl9faXRlbV9faWNvblwiPjxpbWcgc3JjPVwiLi9hc3NldHMvaWNvbnMvcGFpbnRicnVzaC5zdmdcIiAvPjwvZGl2PjxzcGFuPkJlYXJiZWl0ZW48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cInF1ZXN0aW9uLWRyb3Bkb3duX19pdGVtIHF1ZXN0aW9uLWRyb3Bkb3duX19pdGVtLS13aXRoLXRvZ2dsZVwiIGlkPVwibm90aWZ5VG9nZ2xlck9wdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxdWVzdGlvbi1kcm9wZG93bl9faXRlbV9fdG9nZ2xlLXdyYXBwZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxdWVzdGlvbi1kcm9wZG93bl9faXRlbV9faWNvblwiPjxpbWcgc3JjPVwiLi9hc3NldHMvaWNvbnMvYmVsbC5zdmdcIiAvPjwvZGl2PjxzcGFuPk1pdHRlaWx1bmdlbjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInF1ZXN0aW9uLWRyb3Bkb3duX19pdGVtX190b2dnbGUgaXRlbS10b2dnbGVcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIvPjxzcGFuIGNsYXNzPVwiaXRlbS10b2dnbGVfX3NsaWRlclwiPjwvc3Bhbj48L2xhYmVsPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxdWVzdGlvbi1kcm9wZG93bl9faXRlbV9faGludFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoU2llIGVyaGFsdGVuIE1pdHRlaWx1bmdlbiDDvGJlciBuZXVlIEFudHdvcnRlbiB1bmQgS29tbWVudGFyZSlcclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVFCb3R0b21Ecm9wZG93bkVsKHgsIHkpIHtcclxuICAgIGNvbnN0IHhQb3MgPSB4IC0gOTA7XHJcbiAgICBjb25zdCB5UG9zID0geSAtIDEyMCArIHdpbmRvdy5zY3JvbGxZO1xyXG5cclxuICAgIHJldHVybiBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInF1ZXN0aW9uLWNhcmRfX2Ryb3Bkb3duIHF1ZXN0aW9uLWRyb3Bkb3duIHF1ZXN0aW9uLWRyb3Bkb3duLS1ib3R0b21cIiBpZD1cInFCb3R0b21Ecm9wZG93blwiIHN0eWxlPVwidHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgkeyB4UG9zIH1weCwgJHsgeVBvcyB9cHgsIDBweClcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInF1ZXN0aW9uLWRyb3Bkb3duLXdyYXBwZXJcIj5cclxuICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwicXVlc3Rpb24tZHJvcGRvd25fX2l0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicXVlc3Rpb24tZHJvcGRvd25fX2l0ZW1fX2ljb25cIj48aW1nIHNyYz1cIi4vYXNzZXRzL2ljb25zL3NoYXJlLnN2Z1wiIC8+PC9kaXY+PHNwYW4+VGVpbGVuPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJxdWVzdGlvbi1kcm9wZG93bl9faXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxdWVzdGlvbi1kcm9wZG93bl9faXRlbV9faWNvblwiPjxpbWcgc3JjPVwiLi9hc3NldHMvaWNvbnMvd2FybmluZy5zdmdcIiAvPjwvZGl2PjxzcGFuPk1lbGRlbjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVRdWVzdGlvbk5vdGlmaWNhdGlvbnMoKSB7XHJcbiAgICBjb25zdCBub3RpZnlUb2dnbGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub3RpZnlUb2dnbGVyT3B0aW9uJyk7XHJcbiAgICBjb25zdCB7IGNoZWNrZWQgfSA9IG5vdGlmeVRvZ2dsZUVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XHJcblxyXG4gICAgbm90aWZ5VG9nZ2xlRWwucXVlcnlTZWxlY3RvcignaW5wdXQnKS5jaGVja2VkID0gIWNoZWNrZWQ7XHJcbn1cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcclxuICAgIGlmIChxVG9wRHJvcGRvd25FbCAmJiAhcVRvcERyb3Bkb3duRWwuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xyXG4gICAgICAgIHFUb3BEcm9wZG93bkVsLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChxQm90dG9tRHJvcGRvd25FbCAmJiAhcUJvdHRvbURyb3Bkb3duRWwuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xyXG4gICAgICAgIHFCb3R0b21Ecm9wZG93bkVsLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyb3Bkb3duTWVudUVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblxyXG4gICAgaWYgKHVzZXJJbWFnZUVsLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkgfHwgZHJvcGRvd25NZW51RWwuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xyXG4gICAgICAgIGRyb3Bkb3duTWVudUVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdxdWVzdGlvbi1oZWFkZXJfX2Ryb3Bkb3duLWljb24nKSkge1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gZXZlbnQudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgZ2VuZXJhdGVRVG9wRHJvcGRvd25FbCh4LCB5KSk7XHJcbiAgICAgICAgcVRvcERyb3Bkb3duRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncVRvcERyb3Bkb3duJyk7XHJcblxyXG4gICAgICAgIHFUb3BEcm9wZG93bkVsLnF1ZXJ5U2VsZWN0b3IoJyNub3RpZnlUb2dnbGVyT3B0aW9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVRdWVzdGlvbk5vdGlmaWNhdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdxdWVzdGlvbi1yZXZpZXdzX19ob3Jpem9udGFsLWRyb3Bkb3duJykpIHtcclxuICAgICAgICBjb25zdCB7IHgsIHkgfSA9IGV2ZW50LnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGdlbmVyYXRlUUJvdHRvbURyb3Bkb3duRWwoeCwgeSkpO1xyXG4gICAgICAgIHFCb3R0b21Ecm9wZG93bkVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3FCb3R0b21Ecm9wZG93bicpO1xyXG4gICAgfVxyXG59KTtcclxuIl19