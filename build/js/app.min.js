"use strict";

function _createForOfIteratorHelper(o) { if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var userImageEl = document.getElementById('userImage');
var dropdownMenuEl = document.getElementById('accountDropdown');
var scrollToTopBtn = document.getElementById('scrollToTop');
var shortDescEls = document.getElementsByClassName('question-card__content__short-desc');
var qTopDropdownEl;
var qBottomDropdownEl;

var _iterator = _createForOfIteratorHelper(shortDescEls),
    _step;

try {
  var _loop = function _loop() {
    var elem = _step.value;
    elem.addEventListener('click', function () {
      elem.nextElementSibling.style.display = 'block';
      elem.remove();
    });
  };

  for (_iterator.s(); !(_step = _iterator.n()).done;) {
    _loop();
  }
} catch (err) {
  _iterator.e(err);
} finally {
  _iterator.f();
}

function generateQTopDropdownEl(x, y) {
  var xPos = x - 195;
  var yPos = y + 55 + window.scrollY;
  return "\n        <div class=\"question-card__dropdown question-dropdown\" id=\"qTopDropdown\" style=\"transform: translate3d(".concat(xPos, "px, ").concat(yPos, "px, 0px)\">\n            <div class=\"question-dropdown-wrapper\">\n                <a class=\"question-dropdown__item\">\n                    <div class=\"question-dropdown__item__icon\"><img src=\"./assets/icons/share.svg\" /></div><span>Teilen</span>\n                </a>\n                <a class=\"question-dropdown__item\">\n                    <div class=\"question-dropdown__item__icon\"><img src=\"./assets/icons/paintbrush.svg\" /></div><span>Bearbeiten</span>\n                </a>\n                <a class=\"question-dropdown__item question-dropdown__item--with-toggle\" id=\"notifyTogglerOption\">\n                    <div class=\"question-dropdown__item__toggle-wrapper\">\n                        <div>\n                            <div class=\"question-dropdown__item__icon\"><img src=\"./assets/icons/bell.svg\" /></div><span>Mitteilungen</span>\n                        </div>\n                        <label class=\"question-dropdown__item__toggle item-toggle\"><input type=\"checkbox\"/><span class=\"item-toggle__slider\"></span></label></div>\n                    <div class=\"question-dropdown__item__hint\">\n                        (Sie erhalten Mitteilungen \xFCber neue Antworten und Kommentare)\n                    </div>\n                </a>\n            </div>\n        </div>\n    ");
}

function generateQBottomDropdownEl(x, y) {
  var xPos = x - 90;
  var yPos = y - 120 + window.scrollY;
  return "\n        <div class=\"question-card__dropdown question-dropdown question-dropdown--bottom\" id=\"qBottomDropdown\" style=\"transform: translate3d(".concat(xPos, "px, ").concat(yPos, "px, 0px)\">\n            <div class=\"question-dropdown-wrapper\">\n                <a class=\"question-dropdown__item\">\n                    <div class=\"question-dropdown__item__icon\"><img src=\"./assets/icons/share.svg\" /></div><span>Teilen</span>\n                </a>\n                <a class=\"question-dropdown__item\">\n                    <div class=\"question-dropdown__item__icon\"><img src=\"./assets/icons/warning.svg\" /></div><span>Melden</span>\n                </a>\n            </div>\n        </div>\n    ");
}

function toggleQuestionNotifications() {
  var notifyToggleEl = document.getElementById('notifyTogglerOption');

  var _notifyToggleEl$query = notifyToggleEl.querySelector('input'),
      checked = _notifyToggleEl$query.checked;

  notifyToggleEl.querySelector('input').checked = !checked;
}

window.addEventListener('click', function (event) {
  if (qTopDropdownEl && !qTopDropdownEl.contains(event.target)) {
    qTopDropdownEl.remove();
  }

  if (qBottomDropdownEl && !qBottomDropdownEl.contains(event.target)) {
    qBottomDropdownEl.remove();
  }

  dropdownMenuEl.style.display = 'none';

  if (userImageEl.contains(event.target) || dropdownMenuEl.contains(event.target)) {
    dropdownMenuEl.style.display = 'block';
  }

  if (event.target.classList.contains('question-header__dropdown-icon')) {
    var _event$target$getBoun = event.target.getBoundingClientRect(),
        x = _event$target$getBoun.x,
        y = _event$target$getBoun.y;

    document.body.insertAdjacentHTML('beforeend', generateQTopDropdownEl(x, y));
    qTopDropdownEl = document.getElementById('qTopDropdown');
    qTopDropdownEl.querySelector('#notifyTogglerOption').addEventListener('click', toggleQuestionNotifications);
  }

  if (event.target.classList.contains('question-reviews__horizontal-dropdown')) {
    var _event$target$getBoun2 = event.target.getBoundingClientRect(),
        _x = _event$target$getBoun2.x,
        _y = _event$target$getBoun2.y;

    document.body.insertAdjacentHTML('beforeend', generateQBottomDropdownEl(_x, _y));
    qBottomDropdownEl = document.getElementById('qBottomDropdown');
  }
});
scrollToTopBtn.addEventListener('click', function () {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
});
"use strict";

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _createForOfIteratorHelper(o) { if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var qModal = document.getElementById('qModal');
var qCoverColors = document.getElementById('qCoverColors');
var qCoverBgColor = document.getElementById('qCoverBgColor');
var qDetailsBtn = document.getElementById('qDetailsBtn');
var qUserSelectActivator = document.getElementById('qUserSelectActivator');
var qColorBtns = document.getElementsByClassName('question-modal__color-btn');
var qModalCover = qModal.querySelector('.question-modal__cover');
var qUserSelectDropdown;
autosize(document.getElementsByTagName('textarea'));

function changeQCoverColor(targetEl) {
  var pressedColorBtn = targetEl.closest('.question-modal__color-btn');

  if (pressedColorBtn) {
    qCoverBgColor.style.backgroundColor = pressedColorBtn.style.backgroundColor;

    var _iterator = _createForOfIteratorHelper(qColorBtns),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var qColorBtn = _step.value;
        qColorBtn.firstElementChild.src = "../assets/icons/list_".concat(qColorBtn.id == 'qColorBtnWhite' ? 'black' : 'white', ".svg");
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    if (pressedColorBtn.id == 'qColorBtnWhite') {
      pressedColorBtn.firstElementChild.src = '../assets/icons/check_black.svg';
      qModalCover.classList.remove('question-modal__cover-white-text');
    } else {
      pressedColorBtn.firstElementChild.src = '../assets/icons/check_white.svg';
      qModalCover.classList.add('question-modal__cover-white-text');
    }
  }
}

function showQDetails() {
  var qDetailsEl = "\n        <textarea \n            class=\"question-modal__textarea question-modal__textarea--small\" \n            placeholder=\"F\xFCgen Sie gegebenenfalls eine detaillierte Beschreibung Ihrer Frage hinzu\"\n            rows=\"2\"\n        ></textarea>\n    ";
  qModalCover.insertAdjacentHTML('afterend', qDetailsEl);
  qDetailsBtn.remove();
  autosize(document.querySelectorAll('textarea'));
}

function showQAuthorDropdown() {
  var qAuthorDropdown = "\n        <div class=\"q-user-select__dropdown-wrapper\" id=\"qUserSelectDropdown\">\n            <div class=\"q-user-select__dropdown q-select-dropdown\">\n                <button class=\"q-select-dropdown__btn\">\n                    <div class=\"q-user-select__avatar\">\n                        <img src=\"./assets/images/question-vote-avatar.png\"/>\n                    </div>\n                    <span class=\"q-user-select__name\">Philip Djones</span>\n                    <div class=\"q-select-dropdown__btn__check-icon\">\n                        <img src=\"./assets/icons/check_blue.svg\"/>\n                    </div>\n                </button>\n                <button class=\"q-select-dropdown__btn\">\n                    <div class=\"q-user-select__avatar\">\n                        <img src=\"./assets/images/question-1-avatar.png\" />\n                    </div>\n                    <span class=\"q-user-select__name\">Don't use my name</span>\n                </button>\n            </div>\n        </div>\n    ";
  qUserSelectActivator.insertAdjacentHTML('afterend', qAuthorDropdown);
  setTimeout(function () {
    qUserSelectDropdown = document.getElementById('qUserSelectDropdown');
    var authorOptions = qUserSelectDropdown.querySelectorAll('.q-select-dropdown__btn');

    var _iterator2 = _createForOfIteratorHelper(authorOptions),
        _step2;

    try {
      var _loop = function _loop() {
        var authorOption = _step2.value;

        var _authorOption$childre = _slicedToArray(authorOption.children, 2),
            avatar = _authorOption$childre[0],
            name = _authorOption$childre[1];

        authorOption.addEventListener('click', function () {
          qUserSelectActivator.children[0].firstElementChild.src = avatar.firstElementChild.src;
          qUserSelectActivator.children[1].textContent = name.textContent;
        });
      };

      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        _loop();
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
  });
}

qModal.addEventListener('click', function (event) {
  if (qUserSelectDropdown) {
    qUserSelectDropdown.remove();
  }

  if (qCoverColors.contains(event.target)) {
    changeQCoverColor(event.target);
  } else if (qDetailsBtn.contains(event.target)) {
    showQDetails();
  } else if (qUserSelectActivator.contains(event.target)) {
    showQAuthorDropdown();
  }
});
"use strict";

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var swiperParams = {
  slidesPerView: '2.8',
  spaceBetween: 20,
  freeMode: true,
  grabCursor: true
};
document.addEventListener('DOMContentLoaded', function () {
  var swiperEls = document.getElementsByClassName('base-swiper');

  for (var i = 0; i < swiperEls.length; i++) {
    swiperEls[i].querySelector('.swiper-container').classList.add("swiper-".concat(i + 1));
    swiperEls[i].querySelector('.swiper-button-prev').classList.add("btn-prev-".concat(i + 1));
    swiperEls[i].querySelector('.swiper-button-next').classList.add("btn-next-".concat(i + 1));
    var swiper = new Swiper(".swiper-".concat(i + 1), _objectSpread({}, swiperParams, {
      navigation: {
        nextEl: ".btn-next-".concat(i + 1),
        prevEl: ".btn-prev-".concat(i + 1)
      }
    }));
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC4uanMiLCJhc2tRdWVzdGlvbk1vZGFsLmpzIiwic3dpcGVyLmpzIl0sIm5hbWVzIjpbInVzZXJJbWFnZUVsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImRyb3Bkb3duTWVudUVsIiwic2Nyb2xsVG9Ub3BCdG4iLCJzaG9ydERlc2NFbHMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicVRvcERyb3Bkb3duRWwiLCJxQm90dG9tRHJvcGRvd25FbCIsImVsZW0iLCJhZGRFdmVudExpc3RlbmVyIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwic3R5bGUiLCJkaXNwbGF5IiwicmVtb3ZlIiwiZ2VuZXJhdGVRVG9wRHJvcGRvd25FbCIsIngiLCJ5IiwieFBvcyIsInlQb3MiLCJ3aW5kb3ciLCJzY3JvbGxZIiwiZ2VuZXJhdGVRQm90dG9tRHJvcGRvd25FbCIsInRvZ2dsZVF1ZXN0aW9uTm90aWZpY2F0aW9ucyIsIm5vdGlmeVRvZ2dsZUVsIiwicXVlcnlTZWxlY3RvciIsImNoZWNrZWQiLCJldmVudCIsImNvbnRhaW5zIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYm9keSIsImluc2VydEFkamFjZW50SFRNTCIsInNjcm9sbFRvcCIsImRvY3VtZW50RWxlbWVudCIsInFNb2RhbCIsInFDb3ZlckNvbG9ycyIsInFDb3ZlckJnQ29sb3IiLCJxRGV0YWlsc0J0biIsInFVc2VyU2VsZWN0QWN0aXZhdG9yIiwicUNvbG9yQnRucyIsInFNb2RhbENvdmVyIiwicVVzZXJTZWxlY3REcm9wZG93biIsImF1dG9zaXplIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJjaGFuZ2VRQ292ZXJDb2xvciIsInRhcmdldEVsIiwicHJlc3NlZENvbG9yQnRuIiwiY2xvc2VzdCIsImJhY2tncm91bmRDb2xvciIsInFDb2xvckJ0biIsImZpcnN0RWxlbWVudENoaWxkIiwic3JjIiwiaWQiLCJhZGQiLCJzaG93UURldGFpbHMiLCJxRGV0YWlsc0VsIiwicXVlcnlTZWxlY3RvckFsbCIsInNob3dRQXV0aG9yRHJvcGRvd24iLCJxQXV0aG9yRHJvcGRvd24iLCJzZXRUaW1lb3V0IiwiYXV0aG9yT3B0aW9ucyIsImF1dGhvck9wdGlvbiIsImNoaWxkcmVuIiwiYXZhdGFyIiwibmFtZSIsInRleHRDb250ZW50Iiwic3dpcGVyUGFyYW1zIiwic2xpZGVzUGVyVmlldyIsInNwYWNlQmV0d2VlbiIsImZyZWVNb2RlIiwiZ3JhYkN1cnNvciIsInN3aXBlckVscyIsImkiLCJsZW5ndGgiLCJzd2lwZXIiLCJTd2lwZXIiLCJuYXZpZ2F0aW9uIiwibmV4dEVsIiwicHJldkVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQU1BLFdBQVcsR0FBTUMsUUFBUSxDQUFDQyxjQUFULENBQXdCLFdBQXhCLENBQXZCO0FBQ0EsSUFBTUMsY0FBYyxHQUFHRixRQUFRLENBQUNDLGNBQVQsQ0FBd0IsaUJBQXhCLENBQXZCO0FBQ0EsSUFBTUUsY0FBYyxHQUFHSCxRQUFRLENBQUNDLGNBQVQsQ0FBd0IsYUFBeEIsQ0FBdkI7QUFDQSxJQUFNRyxZQUFZLEdBQUtKLFFBQVEsQ0FBQ0ssc0JBQVQsQ0FBZ0Msb0NBQWhDLENBQXZCO0FBRUEsSUFBSUMsY0FBSjtBQUNBLElBQUlDLGlCQUFKOzsyQ0FFbUJILFk7Ozs7O1FBQVJJLEk7QUFDUEEsSUFBQUEsSUFBSSxDQUFDQyxnQkFBTCxDQUFzQixPQUF0QixFQUErQixZQUFNO0FBQ2pDRCxNQUFBQSxJQUFJLENBQUNFLGtCQUFMLENBQXdCQyxLQUF4QixDQUE4QkMsT0FBOUIsR0FBd0MsT0FBeEM7QUFDQUosTUFBQUEsSUFBSSxDQUFDSyxNQUFMO0FBQ0gsS0FIRDs7O0FBREosc0RBQWlDO0FBQUE7QUFLaEM7Ozs7Ozs7QUFFRCxTQUFTQyxzQkFBVCxDQUFnQ0MsQ0FBaEMsRUFBbUNDLENBQW5DLEVBQXNDO0FBQ2xDLE1BQU1DLElBQUksR0FBR0YsQ0FBQyxHQUFHLEdBQWpCO0FBQ0EsTUFBTUcsSUFBSSxHQUFHRixD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QUZELE9BQWY7QUFPSDtBQUNKLENBaEJEIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB1c2VySW1hZ2VFbCAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VySW1hZ2UnKTtcclxuY29uc3QgZHJvcGRvd25NZW51RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWNjb3VudERyb3Bkb3duJyk7XHJcbmNvbnN0IHNjcm9sbFRvVG9wQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njcm9sbFRvVG9wJyk7XHJcbmNvbnN0IHNob3J0RGVzY0VscyAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncXVlc3Rpb24tY2FyZF9fY29udGVudF9fc2hvcnQtZGVzYycpO1xyXG5cclxubGV0IHFUb3BEcm9wZG93bkVsO1xyXG5sZXQgcUJvdHRvbURyb3Bkb3duRWw7XHJcblxyXG5mb3IgKGNvbnN0IGVsZW0gb2Ygc2hvcnREZXNjRWxzKSB7XHJcbiAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGVsZW0ubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIGVsZW0ucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVRVG9wRHJvcGRvd25FbCh4LCB5KSB7XHJcbiAgICBjb25zdCB4UG9zID0geCAtIDE5NTtcclxuICAgIGNvbnN0IHlQb3MgPSB5ICsgNTUgKyB3aW5kb3cuc2Nyb2xsWTtcclxuXHJcbiAgICByZXR1cm4gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJxdWVzdGlvbi1jYXJkX19kcm9wZG93biBxdWVzdGlvbi1kcm9wZG93blwiIGlkPVwicVRvcERyb3Bkb3duXCIgc3R5bGU9XCJ0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKCR7IHhQb3MgfXB4LCAkeyB5UG9zIH1weCwgMHB4KVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicXVlc3Rpb24tZHJvcGRvd24td3JhcHBlclwiPlxyXG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJxdWVzdGlvbi1kcm9wZG93bl9faXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxdWVzdGlvbi1kcm9wZG93bl9faXRlbV9faWNvblwiPjxpbWcgc3JjPVwiLi9hc3NldHMvaWNvbnMvc2hhcmUuc3ZnXCIgLz48L2Rpdj48c3Bhbj5UZWlsZW48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cInF1ZXN0aW9uLWRyb3Bkb3duX19pdGVtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInF1ZXN0aW9uLWRyb3Bkb3duX19pdGVtX19pY29uXCI+PGltZyBzcmM9XCIuL2Fzc2V0cy9pY29ucy9wYWludGJydXNoLnN2Z1wiIC8+PC9kaXY+PHNwYW4+QmVhcmJlaXRlbjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwicXVlc3Rpb24tZHJvcGRvd25fX2l0ZW0gcXVlc3Rpb24tZHJvcGRvd25fX2l0ZW0tLXdpdGgtdG9nZ2xlXCIgaWQ9XCJub3RpZnlUb2dnbGVyT3B0aW9uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInF1ZXN0aW9uLWRyb3Bkb3duX19pdGVtX190b2dnbGUtd3JhcHBlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInF1ZXN0aW9uLWRyb3Bkb3duX19pdGVtX19pY29uXCI+PGltZyBzcmM9XCIuL2Fzc2V0cy9pY29ucy9iZWxsLnN2Z1wiIC8+PC9kaXY+PHNwYW4+TWl0dGVpbHVuZ2VuPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwicXVlc3Rpb24tZHJvcGRvd25fX2l0ZW1fX3RvZ2dsZSBpdGVtLXRvZ2dsZVwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIi8+PHNwYW4gY2xhc3M9XCJpdGVtLXRvZ2dsZV9fc2xpZGVyXCI+PC9zcGFuPjwvbGFiZWw+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInF1ZXN0aW9uLWRyb3Bkb3duX19pdGVtX19oaW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChTaWUgZXJoYWx0ZW4gTWl0dGVpbHVuZ2VuIMO8YmVyIG5ldWUgQW50d29ydGVuIHVuZCBLb21tZW50YXJlKVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIGA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlUUJvdHRvbURyb3Bkb3duRWwoeCwgeSkge1xyXG4gICAgY29uc3QgeFBvcyA9IHggLSA5MDtcclxuICAgIGNvbnN0IHlQb3MgPSB5IC0gMTIwICsgd2luZG93LnNjcm9sbFk7XHJcblxyXG4gICAgcmV0dXJuIGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwicXVlc3Rpb24tY2FyZF9fZHJvcGRvd24gcXVlc3Rpb24tZHJvcGRvd24gcXVlc3Rpb24tZHJvcGRvd24tLWJvdHRvbVwiIGlkPVwicUJvdHRvbURyb3Bkb3duXCIgc3R5bGU9XCJ0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKCR7IHhQb3MgfXB4LCAkeyB5UG9zIH1weCwgMHB4KVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicXVlc3Rpb24tZHJvcGRvd24td3JhcHBlclwiPlxyXG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJxdWVzdGlvbi1kcm9wZG93bl9faXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxdWVzdGlvbi1kcm9wZG93bl9faXRlbV9faWNvblwiPjxpbWcgc3JjPVwiLi9hc3NldHMvaWNvbnMvc2hhcmUuc3ZnXCIgLz48L2Rpdj48c3Bhbj5UZWlsZW48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cInF1ZXN0aW9uLWRyb3Bkb3duX19pdGVtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInF1ZXN0aW9uLWRyb3Bkb3duX19pdGVtX19pY29uXCI+PGltZyBzcmM9XCIuL2Fzc2V0cy9pY29ucy93YXJuaW5nLnN2Z1wiIC8+PC9kaXY+PHNwYW4+TWVsZGVuPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIGA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZVF1ZXN0aW9uTm90aWZpY2F0aW9ucygpIHtcclxuICAgIGNvbnN0IG5vdGlmeVRvZ2dsZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vdGlmeVRvZ2dsZXJPcHRpb24nKTtcclxuICAgIGNvbnN0IHsgY2hlY2tlZCB9ID0gbm90aWZ5VG9nZ2xlRWwucXVlcnlTZWxlY3RvcignaW5wdXQnKTtcclxuXHJcbiAgICBub3RpZnlUb2dnbGVFbC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLmNoZWNrZWQgPSAhY2hlY2tlZDtcclxufVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xyXG4gICAgaWYgKHFUb3BEcm9wZG93bkVsICYmICFxVG9wRHJvcGRvd25FbC5jb250YWlucyhldmVudC50YXJnZXQpKSB7XHJcbiAgICAgICAgcVRvcERyb3Bkb3duRWwucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHFCb3R0b21Ecm9wZG93bkVsICYmICFxQm90dG9tRHJvcGRvd25FbC5jb250YWlucyhldmVudC50YXJnZXQpKSB7XHJcbiAgICAgICAgcUJvdHRvbURyb3Bkb3duRWwucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJvcGRvd25NZW51RWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHJcbiAgICBpZiAodXNlckltYWdlRWwuY29udGFpbnMoZXZlbnQudGFyZ2V0KSB8fCBkcm9wZG93bk1lbnVFbC5jb250YWlucyhldmVudC50YXJnZXQpKSB7XHJcbiAgICAgICAgZHJvcGRvd25NZW51RWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3F1ZXN0aW9uLWhlYWRlcl9fZHJvcGRvd24taWNvbicpKSB7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5IH0gPSBldmVudC50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBnZW5lcmF0ZVFUb3BEcm9wZG93bkVsKHgsIHkpKTtcclxuICAgICAgICBxVG9wRHJvcGRvd25FbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxVG9wRHJvcGRvd24nKTtcclxuXHJcbiAgICAgICAgcVRvcERyb3Bkb3duRWwucXVlcnlTZWxlY3RvcignI25vdGlmeVRvZ2dsZXJPcHRpb24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVF1ZXN0aW9uTm90aWZpY2F0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3F1ZXN0aW9uLXJldmlld3NfX2hvcml6b250YWwtZHJvcGRvd24nKSkge1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gZXZlbnQudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgZ2VuZXJhdGVRQm90dG9tRHJvcGRvd25FbCh4LCB5KSk7XHJcbiAgICAgICAgcUJvdHRvbURyb3Bkb3duRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncUJvdHRvbURyb3Bkb3duJyk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuc2Nyb2xsVG9Ub3BCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA9IDA7XHJcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gMDtcclxufSk7XHJcbiIsImNvbnN0IHFNb2RhbCAgICAgICAgICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3FNb2RhbCcpO1xyXG5jb25zdCBxQ292ZXJDb2xvcnMgICAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxQ292ZXJDb2xvcnMnKTtcclxuY29uc3QgcUNvdmVyQmdDb2xvciAgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncUNvdmVyQmdDb2xvcicpO1xyXG5jb25zdCBxRGV0YWlsc0J0biAgICAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxRGV0YWlsc0J0bicpO1xyXG5jb25zdCBxVXNlclNlbGVjdEFjdGl2YXRvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxVXNlclNlbGVjdEFjdGl2YXRvcicpO1xyXG5jb25zdCBxQ29sb3JCdG5zICAgICAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3F1ZXN0aW9uLW1vZGFsX19jb2xvci1idG4nKTtcclxuY29uc3QgcU1vZGFsQ292ZXIgICAgICAgICAgPSBxTW9kYWwucXVlcnlTZWxlY3RvcignLnF1ZXN0aW9uLW1vZGFsX19jb3ZlcicpO1xyXG5cclxubGV0IHFVc2VyU2VsZWN0RHJvcGRvd247XHJcblxyXG5hdXRvc2l6ZShkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGV4dGFyZWEnKSk7XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VRQ292ZXJDb2xvcih0YXJnZXRFbCkge1xyXG4gICAgY29uc3QgcHJlc3NlZENvbG9yQnRuID0gdGFyZ2V0RWwuY2xvc2VzdCgnLnF1ZXN0aW9uLW1vZGFsX19jb2xvci1idG4nKTtcclxuXHJcbiAgICBpZiAocHJlc3NlZENvbG9yQnRuKSB7XHJcbiAgICAgICAgcUNvdmVyQmdDb2xvci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwcmVzc2VkQ29sb3JCdG4uc3R5bGUuYmFja2dyb3VuZENvbG9yO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHFDb2xvckJ0biBvZiBxQ29sb3JCdG5zKSB7XHJcbiAgICAgICAgICAgIHFDb2xvckJ0bi5maXJzdEVsZW1lbnRDaGlsZC5zcmMgPSBgLi4vYXNzZXRzL2ljb25zL2xpc3RfJHsgXHJcbiAgICAgICAgICAgICAgICBxQ29sb3JCdG4uaWQgPT0gJ3FDb2xvckJ0bldoaXRlJyA/ICdibGFjaycgOiAnd2hpdGUnIFxyXG4gICAgICAgICAgICB9LnN2Z2A7IFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHByZXNzZWRDb2xvckJ0bi5pZCA9PSAncUNvbG9yQnRuV2hpdGUnKSB7XHJcbiAgICAgICAgICAgIHByZXNzZWRDb2xvckJ0bi5maXJzdEVsZW1lbnRDaGlsZC5zcmMgPSAnLi4vYXNzZXRzL2ljb25zL2NoZWNrX2JsYWNrLnN2Zyc7XHJcbiAgICAgICAgICAgIHFNb2RhbENvdmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3F1ZXN0aW9uLW1vZGFsX19jb3Zlci13aGl0ZS10ZXh0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwcmVzc2VkQ29sb3JCdG4uZmlyc3RFbGVtZW50Q2hpbGQuc3JjID0gJy4uL2Fzc2V0cy9pY29ucy9jaGVja193aGl0ZS5zdmcnO1xyXG4gICAgICAgICAgICBxTW9kYWxDb3Zlci5jbGFzc0xpc3QuYWRkKCdxdWVzdGlvbi1tb2RhbF9fY292ZXItd2hpdGUtdGV4dCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd1FEZXRhaWxzKCkge1xyXG4gICAgY29uc3QgcURldGFpbHNFbCA9IGBcclxuICAgICAgICA8dGV4dGFyZWEgXHJcbiAgICAgICAgICAgIGNsYXNzPVwicXVlc3Rpb24tbW9kYWxfX3RleHRhcmVhIHF1ZXN0aW9uLW1vZGFsX190ZXh0YXJlYS0tc21hbGxcIiBcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJGw7xnZW4gU2llIGdlZ2ViZW5lbmZhbGxzIGVpbmUgZGV0YWlsbGllcnRlIEJlc2NocmVpYnVuZyBJaHJlciBGcmFnZSBoaW56dVwiXHJcbiAgICAgICAgICAgIHJvd3M9XCIyXCJcclxuICAgICAgICA+PC90ZXh0YXJlYT5cclxuICAgIGA7XHJcblxyXG4gICAgcU1vZGFsQ292ZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIHFEZXRhaWxzRWwpO1xyXG4gICAgcURldGFpbHNCdG4ucmVtb3ZlKCk7XHJcblxyXG4gICAgYXV0b3NpemUoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dRQXV0aG9yRHJvcGRvd24oKSB7XHJcbiAgICBjb25zdCBxQXV0aG9yRHJvcGRvd24gPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInEtdXNlci1zZWxlY3RfX2Ryb3Bkb3duLXdyYXBwZXJcIiBpZD1cInFVc2VyU2VsZWN0RHJvcGRvd25cIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInEtdXNlci1zZWxlY3RfX2Ryb3Bkb3duIHEtc2VsZWN0LWRyb3Bkb3duXCI+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicS1zZWxlY3QtZHJvcGRvd25fX2J0blwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxLXVzZXItc2VsZWN0X19hdmF0YXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIuL2Fzc2V0cy9pbWFnZXMvcXVlc3Rpb24tdm90ZS1hdmF0YXIucG5nXCIvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicS11c2VyLXNlbGVjdF9fbmFtZVwiPlBoaWxpcCBEam9uZXM8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInEtc2VsZWN0LWRyb3Bkb3duX19idG5fX2NoZWNrLWljb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIuL2Fzc2V0cy9pY29ucy9jaGVja19ibHVlLnN2Z1wiLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInEtc2VsZWN0LWRyb3Bkb3duX19idG5cIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicS11c2VyLXNlbGVjdF9fYXZhdGFyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiLi9hc3NldHMvaW1hZ2VzL3F1ZXN0aW9uLTEtYXZhdGFyLnBuZ1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJxLXVzZXItc2VsZWN0X19uYW1lXCI+RG9uJ3QgdXNlIG15IG5hbWU8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG5cclxuICAgIHFVc2VyU2VsZWN0QWN0aXZhdG9yLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCBxQXV0aG9yRHJvcGRvd24pO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHFVc2VyU2VsZWN0RHJvcGRvd24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncVVzZXJTZWxlY3REcm9wZG93bicpO1xyXG5cclxuICAgICAgICBjb25zdCBhdXRob3JPcHRpb25zID0gcVVzZXJTZWxlY3REcm9wZG93bi5xdWVyeVNlbGVjdG9yQWxsKCcucS1zZWxlY3QtZHJvcGRvd25fX2J0bicpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBhdXRob3JPcHRpb24gb2YgYXV0aG9yT3B0aW9ucykge1xyXG4gICAgICAgICAgICBjb25zdCBbYXZhdGFyLCBuYW1lXSA9IGF1dGhvck9wdGlvbi5jaGlsZHJlbjtcclxuXHJcbiAgICAgICAgICAgIGF1dGhvck9wdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHFVc2VyU2VsZWN0QWN0aXZhdG9yLmNoaWxkcmVuWzBdLmZpcnN0RWxlbWVudENoaWxkLnNyYyA9IGF2YXRhci5maXJzdEVsZW1lbnRDaGlsZC5zcmM7XHJcbiAgICAgICAgICAgICAgICBxVXNlclNlbGVjdEFjdGl2YXRvci5jaGlsZHJlblsxXS50ZXh0Q29udGVudCA9IG5hbWUudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5xTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XHJcbiAgICBpZiAocVVzZXJTZWxlY3REcm9wZG93bikge1xyXG4gICAgICAgIHFVc2VyU2VsZWN0RHJvcGRvd24ucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHFDb3ZlckNvbG9ycy5jb250YWlucyhldmVudC50YXJnZXQpKSB7XHJcbiAgICAgICAgY2hhbmdlUUNvdmVyQ29sb3IoZXZlbnQudGFyZ2V0KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHFEZXRhaWxzQnRuLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcclxuICAgICAgICBzaG93UURldGFpbHMoKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHFVc2VyU2VsZWN0QWN0aXZhdG9yLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcclxuICAgICAgICBzaG93UUF1dGhvckRyb3Bkb3duKCk7XHJcbiAgICB9XHJcbn0pO1xyXG4iLCJjb25zdCBzd2lwZXJQYXJhbXMgPSB7XHJcbiAgICBzbGlkZXNQZXJWaWV3IDogJzIuOCcsXHJcbiAgICBzcGFjZUJldHdlZW4gIDogMjAsXHJcbiAgICBmcmVlTW9kZSAgICAgIDogdHJ1ZSxcclxuICAgIGdyYWJDdXJzb3IgICAgOiB0cnVlXHJcbn07XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xyXG4gICAgY29uc3Qgc3dpcGVyRWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYmFzZS1zd2lwZXInKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN3aXBlckVscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHN3aXBlckVsc1tpXS5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLWNvbnRhaW5lcicpLmNsYXNzTGlzdC5hZGQoYHN3aXBlci0keyBpICsgMSB9YCk7XHJcbiAgICAgICAgc3dpcGVyRWxzW2ldLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItYnV0dG9uLXByZXYnKS5jbGFzc0xpc3QuYWRkKGBidG4tcHJldi0keyBpICsgMSB9YCk7XHJcbiAgICAgICAgc3dpcGVyRWxzW2ldLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItYnV0dG9uLW5leHQnKS5jbGFzc0xpc3QuYWRkKGBidG4tbmV4dC0keyBpICsgMSB9YCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHN3aXBlciA9IG5ldyBTd2lwZXIoYC5zd2lwZXItJHsgaSArIDEgfWAsIHtcclxuICAgICAgICAgICAgLi4uc3dpcGVyUGFyYW1zLFxyXG4gICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICBuZXh0RWwgOiBgLmJ0bi1uZXh0LSR7IGkgKyAxIH1gLFxyXG4gICAgICAgICAgICAgICAgcHJldkVsIDogYC5idG4tcHJldi0keyBpICsgMSB9YCxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0pO1xyXG4iXX0=